<form [formGroup]="form" (ngSubmit)="submit()" class="w-full p-6 bg-white rounded shadow">
  <h2 class="text-xl font-bold mb-6">Detalle de la orden</h2>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">

    <div>
      <label class="block mb-1 font-semibold">ID de Orden</label>
      <input
        type="number"
        formControlName="order_id"
        class="w-full p-inputtext rounded border border-gray-300"
        placeholder="Ej: 1"
      />
    </div>

    <div>
      <label class="block mb-1 font-semibold">Tipo de Producto</label>
      <select formControlName="product_type" class="w-full p-inputtext rounded border border-gray-300">
        <option value="LENS">Lente</option>
        <option value="FRAME">Armazón</option>
      </select>
    </div>

    <div>
      <label class="block mb-1 font-semibold">Producto</label>
      <select formControlName="product_id" class="w-full p-inputtext rounded border border-gray-300">
        <option value="">Seleccione un producto</option>
        <option *ngFor="let product of availableProducts" [value]="product.id">
          {{ getProductLabel(product) }}
        </option>
      </select>
    </div>

    <div>
      <label class="block mb-1 font-semibold">Cantidad</label>
      <input
        type="number"
        formControlName="quantity"
        class="w-full p-inputtext rounded border border-gray-300"
        placeholder="Ej: 1"
      />
    </div>

  
    <div>
      <label class="block mb-1 font-semibold">Precio Unitario</label>
      <input
        type="number"
        formControlName="unit_price"
        class="w-full p-inputtext rounded border border-gray-300"
        placeholder="Ej: 150000"
      />
    </div>


  <div *ngIf="form.get('productType')?.value === 'LENS'">
    <label class="block mb-1 font-semibold">Graduación</label>
    <input
      type="text"
      formControlName="graduation"
      class="w-full p-inputtext rounded border border-gray-300"
      placeholder="Ej: 2.00"
    />
  </div>


    <div>
      <label class="block mb-1 font-semibold">Subtotal</label>
      <input
        type="number"
        formControlName="subtotal"
        class="w-full p-inputtext rounded border border-gray-300 bg-gray-100"
        readonly
      />
    </div>
  </div>

  <div class="flex justify-center mt-6">
    <div class="bg-gray-100 rounded p-4 flex gap-4 items-center">
      <button
        pButton
        type="submit"
        class="p-button p-component bg-green-600 hover:bg-green-700 text-white"
        label="Guardar"
        icon="pi pi-save"
        [disabled]="form.invalid"
      ></button>

      <button
        pButton
        type="button"
        class="!bg-gray-400 !border-gray-400 hover:!bg-gray-500 hover:!border-gray-500 text-white"
        label="Cancelar"
        icon="pi pi-times"
        (click)="cancelar()"
      ></button>
    </div>
  </div>
</form>